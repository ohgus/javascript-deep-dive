# ğŸ“• 22ì¥ this

## ğŸ“ 22.1 this í‚¤ì›Œë“œ

ê°ì²´ì˜ ë©”ì„œë“œëŠ” ìì‹ ì´ ì†í•œ ê°ì²´ì˜ ìƒíƒœë¥¼ ì°¸ì¡°í•˜ê³  ë³€ê²½í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. -> ìì‹ ì´ ì†í•œ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” ì‹ë³„ìë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.

```js
const circle = {
  radius: 6,
  getDiameter() {
    return 2 * circle.radius; // ë©”ì„œë“œê°€ í˜¸ì¶œë˜ëŠ” ì‹œì ì—ëŠ” ì´ë¯¸ ìì‹ ì´ ì†í•œ ê°ì²´ê°€ í‰ê°€ë˜ê³  ì‹ë³„ìì— í• ë‹¹ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì¬ê·€ì ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
    // ì¬ê·€ì  ì°¸ì¡°ëŠ” ì¼ë°˜ì ì´ì§€ ì•Šê³  ë°”ëŒì§í•˜ì§€ ì•Šë‹¤.
  },
};

// this ì‚¬ìš©
const circle = {
  radius: 6,
  getDiameter() {
    return 2 * this.radius; // thisê°€ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
  },
};
```

ìƒì„±ì í•¨ìˆ˜ ë‚´ë¶€ì—ì„œëŠ” í”„ë¡œí¼í‹° ë˜ëŠ” ë©”ì„œë“œë¥¼ ì¶”ê°€í•˜ê¸° ìœ„í•´ ìì‹ ì´ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆì–´ì•¼ í•˜ì§€ë§Œ ìƒì„±ì í•¨ìˆ˜ì— ì˜í•œ ê°ì²´ ìƒì„± ë°©ì‹ì€ ì–¸ì œë‚˜ `new` ì—°ì‚°ìì™€ í•¨ê»˜ ìƒì„±ì í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼ í•œë‹¤.

ìƒì„±ì í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ëŠ” ì‹œì ì—ëŠ” ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ê¸° ì´ì „ì´ê¸° ë•Œë¬¸ì— ì•„ì§ ì–´ë–¤ ì‹ë³„ìë¥¼ ê°€ë¥´í‚¤ëŠ”ì§€ ì•Œ ìˆ˜ ì—†ë‹¤. ì´ë•Œ JS ì—”ì§„ì€ ìì‹ ì´ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¤ëŠ” íŠ¹ë³„í•œ ì‹ë³„ì `this`ë¥¼ ì œê³µí•œë‹¤.

```js
function Circle(radius) {
  this.radius = radius;

  getDiameter() {
    return 2 * this.radius; // thisê°€ ìƒì„±ì í•¨ìˆ˜ê°€ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
  }
}

const circle = new Circle(6);
```

`this`ëŠ” ìì‹ ì´ ì†í•œ ê°ì²´ ë˜ëŠ” ìì‹ ì´ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¤ëŠ” ìê¸° ì°¸ì¡° ë³€ìˆ˜ì´ë©° `this`ë¥¼ í†µí•´ ìì‹ ì´ ì†í•œ ê°ì²´ ë˜ëŠ” ìì‹ ì´ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ì˜ í”„ë¡œí¼í‹°ë‚˜ ë©”ì„œë“œë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤.

- `this`ëŠ” JS ì—”ì§„ì— ì˜í•´ ì•”ë¬µì ìœ¼ë¡œ ìƒì„±ë˜ë©°, ì½”ë“œ ì–´ë””ì„œë“  ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤. -> but ê°ì²´ì˜ í”„ë¡œí¼í‹°ë‚˜ ë©”ì„œë“œë¥¼ ì°¸ì¡°í•˜ê¸° ìœ„í•œ ìê¸° ì°¸ì¡° ë³€ìˆ˜ì´ë¯€ë¡œ ì¼ë°˜ì ìœ¼ë¡œ ê°ì²´ì˜ ë©”ì„œë“œ, ìƒì„±ì í•¨ìˆ˜ ë‚´ë¶€ì—ì„œë§Œ ì˜ë¯¸ê°€ ìˆë‹¤.
- í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ `arguments` ê°ì²´ì™€ ê°™ì´ ì•”ë¬µì ìœ¼ë¡œ í•¨ìˆ˜ ë‚´ë¶€ì— ì „ë‹¬ëœë‹¤.
- í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ `arguments` ê°ì²´ì²˜ëŸ¼ ì§€ì—­ ë³€ìˆ˜ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- `this` ë°”ì¸ë”©ì€ í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹ì— ì˜í•´ ë™ì ìœ¼ë¡œ ê²°ì •ëœë‹¤. -> ì—„ê²© ëª¨ë“œ ë˜í•œ `this` ë°”ì¸ë”©ì— ì˜í–¥ì„ ì¤€ë‹¤.
- ì „ì—­, ì¼ë°˜ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œëŠ” `window`ë¥¼ ê°€ë¦¬í‚¨ë‹¤. -> ì—„ê²© ëª¨ë“œê°€ ì ìš©ëœ ì¼ë°˜ í•¨ìˆ˜ì˜ ê²½ìš° `undefined`ê°€ ë°”ì¸ë”© ëœë‹¤. (ì¼ë°˜ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œëŠ” `this`ë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ê¸° ë•Œë¬¸)

## ğŸ“ 22.2 í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹ê³¼ this ë°”ì¸ë”©

`this` ë°”ì¸ë”©ì€ í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹ì— ì˜í•´ ë™ì ìœ¼ë¡œ ê²°ì •ëœë‹¤. **ë™ì¼í•œ í•¨ìˆ˜ë„ ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆìœ¼ë‹ˆ ì£¼ì˜í•˜ì.**

ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ì™€ `this` ë°”ì¸ë”©ì€ ê²°ì • ì‹œê¸°ê°€ ë‹¤ë¥´ë‹¤. ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ì˜ ê²½ìš° í•¨ìˆ˜ ì •ì˜ê°€ í‰ê°€ë˜ì–´ í•¨ìˆ˜ ê°ì²´ê°€ ìƒì„±ë˜ëŠ” ì‹œì ì— ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ê²°ì •í•œë‹¤.

### âœï¸ ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œ

ê¸°ë³¸ì ìœ¼ë¡œ `this`ì—ëŠ” ì „ì—­ ê°ì²´ê°€ ë°”ì¸ë”©ëœë‹¤.

```js
var value = 1;

const obj = {
  value: 100,
  foo() {
    console.log(this); // {value: 100, foo: f}
    console.log(this.value); // 100

    function boo() {
      console.log(this); // window
      console.log(this.value); // 1
    }

    boo(); // ë©”ì„œë“œ ë‚´ë¶€ì— ì •ì˜ëœ ì¤‘ì²¨ í•¨ìˆ˜ë„ ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œí•˜ë©´ thisì— ì „ì—­ ê°ì²´ê°€ ë°”ì¸ë”©ëœë‹¤.
  },
};

obj.foo();
```

ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œëœ ëª¨ë“  í•¨ìˆ˜(ì¤‘ì²© í•¨ìˆ˜, ì½œë°± í•¨ìˆ˜ í¬í•¨) ë‚´ë¶€ì˜ `this`ì—ëŠ” ì „ì—­ ê°ì²´ê°€ ë°”ì¸ë”©ëœë‹¤.

ì¤‘ì²© í•¨ìˆ˜, ì½œë°± í•¨ìˆ˜ëŠ” ì™¸ë¶€ í•¨ìˆ˜ë¥¼ ë•ëŠ” í—¬í¼ í•¨ìˆ˜ì˜ ì—­í• ì„ í•˜ë¯€ë¡œ ì™¸ë¶€ í•¨ìˆ˜ì˜ ì¼ë¶€ ë¡œì§ì„ ëŒ€ì‹ í•˜ëŠ” ê²½ìš°ê°€ ëŒ€ë¶€ë¶„ì¸ë° `this`ê°€ ì „ì—­ ê°ì²´ë¥¼ ë°”ì¸ë”©í•´ ì™¸ë¶€ í•¨ìˆ˜ì¸ ë©”ì„œë“œì™€ `this`ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ê²ƒì€ í—¬í¼ í•¨ìˆ˜ë¡œ ë™ì‘í•˜ê¸° ì–´ë µê²Œ ë§Œë“ ë‹¤.

```js
var value = 1;

const obj = {
  value: 100,
  foo() {
    console.log(this.value); // 100

    const that = this;

    function boo() {
      console.log(that.value); // 100
    }

    boo();
  },
};

obj.foo();

// bind
var value = 1;

const obj = {
  value: 100,
  foo() {
    console.log(this.value); // 100

    function boo() {
      console.log(this.value); // 100
    }

    const boundBoo = boo.bind(this);
    boundBoo();
  },
};

obj.foo();

// í™”ì‚´í‘œ í•¨ìˆ˜
var value = 1;

const obj = {
  value: 100,
  foo() {
    console.log(this.value); // 100

    const boo = () => {
      console.log(this.value); // 100
    };

    boo();
  },
};

obj.foo();
```

ë©”ì„œë“œ ë‚´ë¶€ì˜ ì¤‘ì²¨ í•¨ìˆ˜, ì½œë°± í•¨ìˆ˜ì˜ `this` ë°”ì¸ë”©ì„ ë©”ì„œë“œì˜ `this` ë°”ì¸ë”©ê³¼ ì¼ì¹˜ì‹œí‚¤ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œëŠ” `Function.prototype.apply`, `Function.prototype.call`, `Function.prototype.bind`ë¥¼ ì‚¬ìš©í•´ ëª…ì‹œì ìœ¼ë¡œ `this`ë¥¼ ë°”ì¸ë”© í•˜ê±°ë‚˜ ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ `this`ë¥¼ ë³€ìˆ˜ì— í• ë‹¹ì‹œì¼œ ì¤‘ì²© í•¨ìˆ˜, ì½œë°± í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì°¸ì¡°í•˜ëŠ” ë°©ì‹, í™”ì‚´í‘œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ ìˆë‹¤.

### âœï¸ ë©”ì„œë“œ í˜¸ì¶œ

ë©”ì„œë“œ ë‚´ë¶€ì˜ ê°ì²´ëŠ” ë©”ì„œë“œë¥¼ ì†Œìœ í•œ ê°ì²´ê°€ ì•„ë‹Œ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´ì— ë°”ì¸ë”©ëœë‹¤. -> í”„ë¡œí† íƒ€ì… ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ ì‚¬ìš©ëœ `this`ë„ ë§ˆì°¬ê°€ì§€.

ë©”ì„œë“œëŠ” ê°ì²´ì— í¬í•¨ëœ ê²ƒì´ ì•„ë‹ˆë¼ ë…ë¦½ì ìœ¼ë¡œ ì¡´ì¬í•˜ëŠ” ë³„ë„ì˜ ê°ì²´ì´ê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ ê°ì²´ì˜ í”„ë¡œí¼í‹°ì— í• ë‹¹í•˜ëŠ” ê²ƒìœ¼ë¡œ ë‹¤ë¥¸ ê°ì²´ì˜ ë©”ì„œë“œê°€ ë  ìˆ˜ë„ ìˆê³  ì¼ë°˜ ë³€ìˆ˜ì— í• ë‹¹í•˜ì—¬ ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œë  ìˆ˜ë„ ìˆë‹¤.

```js
const person = {
  name: 'oh',
  getName() {
    return this.name;
  },
};

const person2 = {
  name: 'lee',
};

// ë‹¤ë¥¸ ê°ì²´ì— ë©”ì„œë“œë¥¼ í• ë‹¹
person2.getName = person.getName;

console.log(person2.getName()); // lee

// ì¼ë°˜ ë³€ìˆ˜ì— ë©”ì„œë“œë¥¼ í• ë‹¹
const getName = person.getName;

console.log(getName()); // ''
// ë¸Œë¼ìš°ì € -> window.name = ''
// Node.js -> undefined
```

```js
function Person(name) {
  this.name = name;
}

Person.prototype.getName = function () {
  return this.name;
};

const me = new Person('oh');

console.log(me.getName()); // oh

Person.prototype.name = 'lee';

console.log(Person.prototype.getName()); // lee
```

### âœï¸ ìƒì„±ì í•¨ìˆ˜ í˜¸ì¶œ

ìƒì„±ì í•¨ìˆ˜ ë‚´ë¶€ì˜ `this`ì—ëŠ” ë¯¸ë˜ì— ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ê°€ ë°”ì¸ë”©ëœë‹¤.

```js
function Person(name) {
  this.name = name;

  this.sayHi = function () {
    return `Hi i am ${this.name}`;
  };
}

const lee = new Person('lee');
const oh = new Person('oh');

console.log(lee.sayHi()); // Hi i am lee
console.log(oh.sayHi()); // Hi i am oh

// ì¼ë°˜ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œí–ˆì„ ê²½ìš°
const kim = Person('kim');

console.log(kim); // undefined

// ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œí–ˆì„ ê²½ìš° ë‚´ë¶€ì˜ thisëŠ” ì „ì—­ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
console.log(name); // kim
```

### âœï¸ Function.prototype.apply/call/bind ë©”ì„œë“œì— ì˜í•œ ê°„ì ‘ í˜¸ì¶œ

`apply`, `call`, `bind` ë©”ì„œë“œëŠ” `Function.prototype`ì˜ ë©”ì„œë“œë¡œ ëª¨ë“  í•¨ìˆ˜ê°€ ìƒì†ë°›ì•„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

#### âœ… apply, call

`apply`, `call` ë©”ì„œë“œì˜ ë³¸ì§ˆì ì¸ ê¸°ëŠ¥ì€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ë‹¤. í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì¸ìˆ˜ë¡œ ì „ë‹¬í•œ ê°ì²´ë¥¼ í˜¸ì¶œí•œ í•¨ìˆ˜ì˜ `this`ì— ë°”ì¸ë”©í•œë‹¤. ë‘˜ì€ í•¨ìˆ˜ì— ì¸ìˆ˜ë¥¼ ì „ë‹¬í•˜ëŠ” ë°©ì‹ë§Œ ë‹¤ë¥¼ ë¿ ë™ì¼í•˜ê²Œ ë™ì‘í•œë‹¤.

ëŒ€í‘œì ìœ¼ë¡œ `arguments` ê°ì²´ì™€ ê°™ì€ ìœ ì‚¬ ë°°ì—´ ê°ì²´ì— ë°°ì—´ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì— ì‚¬ìš©í•œë‹¤.

```js
function getThisBinding() {
  console.log(arguments);
  return this;
}

const thisArg = { a: 1 };

// applyëŠ” í˜¸ì¶œí•  í•¨ìˆ˜ì˜ ì¸ìˆ˜ë¥¼ ë°°ì—´ë¡œ ë¬¶ì–´ ì „ë‹¬í•œë‹¤.
console.log(getThisBinding.apply(thisArg, [1, 2, 3]));
// Arguments(3) {1,2,3, callee: f, Symbol(Symbol.iterator): f}
// {a: 1}

// callì€ í˜¸ì¶œí•  í•¨ìˆ˜ì˜ ì¸ìˆ˜ë¥¼ ì‰¼í‘œë¡œ êµ¬ë¶„í•œ ë¦¬ìŠ¤íŠ¸ í˜•ì‹ìœ¼ë¡œ ì „ë‹¬í•œë‹¤.
console.log(getThisBinding.call(thisArg, 1, 2, 3));
// Arguments(3) {1,2,3, callee: f, Symbol(Symbol.iterator): f}
// {a: 1}
```

#### âœ… bind

`apply`, `call`ì™€ ë‹¬ë¦¬ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šê³  ì²«ë²ˆì§¸ ì¸ìˆ˜ë¡œ ì „ë‹¬í•œ ê°’ìœ¼ë¡œ `this` ë°”ì¸ë”©ì´ êµì²´ëœ í•¨ìˆ˜ë¥¼ ìƒˆë¡­ê²Œ ìƒì„±í•´ ë°˜í™˜í•œë‹¤.

ë©”ì„œë“œ ë‚´ë¶€ì— ì¤‘ì²© í•¨ìˆ˜, ì½œë°± í•¨ìˆ˜ì˜ `this`ê°€ ë¶ˆì¼ì¹˜í•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤.

```js
function foo() {
  return this;
}

const thisArg = { a: 1 };

console.log(foo.bind(thisArg)); // ì „ë‹¬ëœ ì¸ìˆ˜ë¡œ this ë°”ì¸ë”©ì´ êµì²´ëœ foo
console.log(foo.bind(thisArg)()); // { a: 1 }

const person = {
  name: 'lee',
  foo(callback) {
    // ì½œë°± í•¨ìˆ˜ì— í•¨ìˆ˜ ë‚´ë¶€ this ë°”ì¸ë”©ì„ ì „ë‹¬
    setTimeout(callback.bind(this), 100);
  },
};
```
